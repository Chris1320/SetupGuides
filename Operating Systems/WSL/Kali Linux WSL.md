---
title: Kali Linux (WSL)
description: My Kali Linux in Windows Subsystem for Linux (WSL) configuration
draft: false
tags:
  - linux/distro
  - windows/wsl
---
# Kali Linux (Windows Subsystem for Linux)

The **Windows Subsystem for Linux** (WSL) is a compatibility layer developed by Microsoft that allows you to run a Linux environment directly on Windows without the need for a virtual machine or dual-boot setup. This guide will show you how I set up my Kali WSL.

## Requirements

- Windows 11/Windows 10 v2004+

## Enabling Windows Subsystem for Linux (WSL)

> [!INFO] Read [Microsoft Learn's documentation](https://learn.microsoft.com/en-us/windows/wsl/install) for more detailed and up-to-date information.

Run the Windows Command Prompt or PowerShell *as administrator* and run the following command:

```powershell
wsl --install --no-distribution
```

If you have to [install WSL manually](https://learn.microsoft.com/en-us/windows/wsl/install-manual), you have to run the following commands instead:

```powershell
# Enable "Windows Subsystem for Linux" optional feature.
dism /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart

# Enable "Virtual Machine Platform" optional feature.
dism /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
```

After a system restart, you'll have to download and install the [Linux kernel update package](https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi).

## Installing and Setting Up Kali Linux WSL

Open a Windows Command Prompt or PowerShell, and run the following command to install Kali Linux WSL:

```powershell
wsl --install kali-linux
```

It will start downloading the distribution and after a few minutes you will be asked for a new UNIX username and password. When you finished setting up the your new Kali Linux credentials, update the system.

```bash
sudo apt update
sudo apt upgrade
```

Edit the `/etc/wsl.conf` file according to your needs. You can see the documentation here: [Advanced settings configuration in WSL | Microsoft Learn](https://learn.microsoft.com/en-us/windows/wsl/wsl-config)

```toml
[boot]
systemd = true

[automount]
enabled = true

[network]
hostname = edgeRunner
generateHosts = false

[interop]
enabled = false
appendWindowsPath = false
```

After changing the hostname via `wsl.conf`, you now have to update the `hosts` file. Open it and change all occurences of the old hostname with the new hostname you've chosen.

```bash
sudo -e /etc/hosts
```

> [!EXAMPLE]- Sample `/etc/hosts` File
> 
> ```conf
> # This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:
> # [network]
> # generateHosts = false
> 127.0.0.1       localhost
> 127.0.1.1      OLD_HOST_NAME.localdomain        OLD_HOST_NAME
> 
> # The following lines are desirable for IPv6 capable hosts
> ::1     ip6-localhost ip6-loopback
> fe00::0 ip6-localnet
> ff00::0 ip6-mcastprefix
> ff02::1 ip6-allnodes
> ff02::2 ip6-allrouters
> ```

I recommend that you use my [[ZSH|custom ZSH configuration]] for more convenience. After that, we'll have to install some dependencies of the packages that we'll download and install.

```bash
sudo apt install fuse gcc make nodejs npm jq trash-cli
```

It is also a good time to create directories that you'll use often:

```bash
mkdir Downloads Projects Temp
```

Download software that are not available on the Kali repositories or are not up-to-date:

```bash
# Install pfetch
curl -Lo ~/.local/bin/pfetch "https://raw.githubusercontent.com/Un1q32/pfetch/refs/heads/master/pfetch" && chmod +x ~/.local/bin/pfetch

# Install Neovim
curl -Lo ~/.local/appimages/nvim "$(curl -s https://api.github.com/repos/neovim/neovim/releases/latest | grep -o 'https://.*nvim\.appimage' | head -n 1)" && chmod +x ~/.local/appimages/nvim
```

I also recommend that you install my [[Neovim|custom Neovim configuration]] if you're using Neovim for software development.
